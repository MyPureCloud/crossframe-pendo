!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b():"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?exports.crossframePendo=b():a.crossframePendo=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){function d(a){if(a.isShown()){var b=!0,c=!1,d=void 0;try{for(var e,f=a.steps[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var i=e.value;if(i.isShown()){g.resolveRequest("showStep",[a.id,i.id]);var j=a.getPositionOfStep(i);if(1===j)g.resolveRequest("launchGuide",[a.id]);else{var k=a.steps[j-2];h.stepAdvanceCallback(k)}}}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}a.after("launch",function(){a.isShown()?g.resolveRequest("launchGuide",[a.id]):g.tryAdjacentFrames("launchGuide",[a.id],h.timeout).catch(function(){h.errorCallback({errorType:"GUIDE.LAUNCH",guideId:a.id})})});var l=function(b){b.after("show",function(){b.isShown()?g.resolveRequest("showStep",[a.id,b.id]):g.tryAdjacentFrames("showStep",[a.id,b.id],h.timeout).catch(function(){h.errorCallback({errorType:"STEP.ADVANCE",guideId:a.id,stepId:b.id})})}),"tooltip"===b.type?b.after("advance",function(){h.stepAdvanceCallback(b)}):b.after("hide",function(){"active"===b.seenState&&setTimeout(function(){h.stepAdvanceCallback(b)},0)})},m=!0,n=!1,o=void 0;try{for(var p,q=a.steps[Symbol.iterator]();!(m=(p=q.next()).done);m=!0){var r=p.value;l(r)}}catch(a){n=!0,o=a}finally{try{!m&&q.return&&q.return()}finally{if(n)throw o}}}var e=c(1),f=c(2).Promise,g=c(7),h={errorCallback:function(){},stepAdvanceCallback:function(){},timeout:1e4},i=function(){var a=!1;return function(b){if(a)return f.resolve();for(var c in b)h[c]=b[c];return a=!0,e.getGuides().then(function(a){a.forEach(d),e.registerEventHandler("guidesLoaded",function(a){a.guides.forEach(d)})})}}();a.exports={findGuideById:e.findGuideById,findGuideByName:e.findGuideByName,getGuides:e.getGuides,initialize:i,reloadGuides:e.reloadGuides}},function(a,b,c){function d(a){return f().then(function(){return window.pendo.findGuideById(a)})}function e(a){return f().then(function(){return window.pendo.findGuideByName(a)})}function f(){return k().then(function(a){return a.guides&&a.guides.length?a.guides:o()})}function g(a){return d(a).then(function(a){return a.launch(),a.isShown()?l.resolve():l.reject(new Error("Unable to launch guide"))})}function h(a,b){return k().then(function(c){c.events[a](function(){b(c)})})}function i(){return k().then(function(a){return a.loadGuides().then(function(){a.events.guidesLoaded()}),o()})}function j(a,b){return d(a).then(function(a){var c=a.findStepById(b);return c.show(),c.isShown()?l.resolve():l.reject(new Error("Unable to show step"))})}function k(){var a=arguments.length<=0||void 0===arguments[0]?0:arguments[0];return new l(function(b,c){window.pendo&&window.pendo.initialize?b(window.pendo):a>=n?c(new Error("Timed out waiting for Pendo")):window.setTimeout(function(){b(k(a+m))},m)})}var l=c(2).Promise,m=250,n=1e4,o=function(){var a=!1,b=[];return function(){return a||(h("guidesLoaded",function(a){var c=!0,d=!1,e=void 0;try{for(var f,g=b[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;h.resolve(a.guides)}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}b=[]}),a=!0),new l(function(a){b.push({resolve:a})})}}();a.exports={findGuideById:d,findGuideByName:e,getGuides:f,launchGuide:g,registerEventHandler:h,reloadGuides:i,showStep:j}},function(a,b,c){var d;(function(a,e,f){(function(){"use strict";function g(a){return"function"==typeof a||"object"==typeof a&&null!==a}function h(a){return"function"==typeof a}function i(a){Y=a}function j(a){aa=a}function k(){return function(){a.nextTick(p)}}function l(){return function(){X(p)}}function m(){var a=0,b=new da(p),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function n(){var a=new MessageChannel;return a.port1.onmessage=p,function(){a.port2.postMessage(0)}}function o(){return function(){setTimeout(p,1)}}function p(){for(var a=0;a<_;a+=2){var b=ga[a],c=ga[a+1];b(c),ga[a]=void 0,ga[a+1]=void 0}_=0}function q(){try{var a=c(5);return X=a.runOnLoop||a.runOnContext,l()}catch(a){return o()}}function r(a,b){var c=this,d=new this.constructor(t);void 0===d[ja]&&M(d);var e=c._state;if(e){var f=arguments[e-1];aa(function(){J(e,d,f,c._result)})}else F(c,d,a,b);return d}function s(a){var b=this;if(a&&"object"==typeof a&&a.constructor===b)return a;var c=new b(t);return B(c,a),c}function t(){}function u(){return new TypeError("You cannot resolve a promise with itself")}function v(){return new TypeError("A promises callback cannot return that same promise.")}function w(a){try{return a.then}catch(a){return na.error=a,na}}function x(a,b,c,d){try{a.call(b,c,d)}catch(a){return a}}function y(a,b,c){aa(function(a){var d=!1,e=x(c,b,function(c){d||(d=!0,b!==c?B(a,c):D(a,c))},function(b){d||(d=!0,E(a,b))},"Settle: "+(a._label||" unknown promise"));!d&&e&&(d=!0,E(a,e))},a)}function z(a,b){b._state===la?D(a,b._result):b._state===ma?E(a,b._result):F(b,void 0,function(b){B(a,b)},function(b){E(a,b)})}function A(a,b,c){b.constructor===a.constructor&&c===ha&&constructor.resolve===ia?z(a,b):c===na?E(a,na.error):void 0===c?D(a,b):h(c)?y(a,b,c):D(a,b)}function B(a,b){a===b?E(a,u()):g(b)?A(a,b,w(b)):D(a,b)}function C(a){a._onerror&&a._onerror(a._result),G(a)}function D(a,b){a._state===ka&&(a._result=b,a._state=la,0!==a._subscribers.length&&aa(G,a))}function E(a,b){a._state===ka&&(a._state=ma,a._result=b,aa(C,a))}function F(a,b,c,d){var e=a._subscribers,f=e.length;a._onerror=null,e[f]=b,e[f+la]=c,e[f+ma]=d,0===f&&a._state&&aa(G,a)}function G(a){var b=a._subscribers,c=a._state;if(0!==b.length){for(var d,e,f=a._result,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?J(c,d,e,f):e(f);a._subscribers.length=0}}function H(){this.error=null}function I(a,b){try{return a(b)}catch(a){return oa.error=a,oa}}function J(a,b,c,d){var e,f,g,i,j=h(c);if(j){if(e=I(c,d),e===oa?(i=!0,f=e.error,e=null):g=!0,b===e)return void E(b,v())}else e=d,g=!0;b._state!==ka||(j&&g?B(b,e):i?E(b,f):a===la?D(b,e):a===ma&&E(b,e))}function K(a,b){try{b(function(b){B(a,b)},function(b){E(a,b)})}catch(b){E(a,b)}}function L(){return pa++}function M(a){a[ja]=pa++,a._state=void 0,a._result=void 0,a._subscribers=[]}function N(a){return new ua(this,a).promise}function O(a){var b=this;return new b($(a)?function(c,d){for(var e=a.length,f=0;f<e;f++)b.resolve(a[f]).then(c,d)}:function(a,b){b(new TypeError("You must pass an array to race."))})}function P(a){var b=this,c=new b(t);return E(c,a),c}function Q(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function R(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function S(a){this[ja]=L(),this._result=this._state=void 0,this._subscribers=[],t!==a&&("function"!=typeof a&&Q(),this instanceof S?K(this,a):R())}function T(a,b){this._instanceConstructor=a,this.promise=new a(t),this.promise[ja]||M(this.promise),$(b)?(this._input=b,this.length=b.length,this._remaining=b.length,this._result=new Array(this.length),0===this.length?D(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&D(this.promise,this._result))):E(this.promise,U())}function U(){return new Error("Array Methods must be provided an Array")}function V(){var a;if("undefined"!=typeof e)a=e;else if("undefined"!=typeof self)a=self;else try{a=Function("return this")()}catch(a){throw new Error("polyfill failed because global object is unavailable in this environment")}var b=a.Promise;b&&"[object Promise]"===Object.prototype.toString.call(b.resolve())&&!b.cast||(a.Promise=ta)}var W;W=Array.isArray?Array.isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)};var X,Y,Z,$=W,_=0,aa=function(a,b){ga[_]=a,ga[_+1]=b,_+=2,2===_&&(Y?Y(p):Z())},ba="undefined"!=typeof window?window:void 0,ca=ba||{},da=ca.MutationObserver||ca.WebKitMutationObserver,ea="undefined"==typeof self&&"undefined"!=typeof a&&"[object process]"==={}.toString.call(a),fa="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,ga=new Array(1e3);Z=ea?k():da?m():fa?n():void 0===ba?q():o();var ha=r,ia=s,ja=Math.random().toString(36).substring(16),ka=void 0,la=1,ma=2,na=new H,oa=new H,pa=0,qa=N,ra=O,sa=P,ta=S;S.all=qa,S.race=ra,S.resolve=ia,S.reject=sa,S._setScheduler=i,S._setAsap=j,S._asap=aa,S.prototype={constructor:S,then:ha,catch:function(a){return this.then(null,a)}};var ua=T;T.prototype._enumerate=function(){for(var a=this.length,b=this._input,c=0;this._state===ka&&c<a;c++)this._eachEntry(b[c],c)},T.prototype._eachEntry=function(a,b){var c=this._instanceConstructor,d=c.resolve;if(d===ia){var e=w(a);if(e===ha&&a._state!==ka)this._settledAt(a._state,b,a._result);else if("function"!=typeof e)this._remaining--,this._result[b]=a;else if(c===ta){var f=new c(t);A(f,a,e),this._willSettleAt(f,b)}else this._willSettleAt(new c(function(b){b(a)}),b)}else this._willSettleAt(d(a),b)},T.prototype._settledAt=function(a,b,c){var d=this.promise;d._state===ka&&(this._remaining--,a===ma?E(d,c):this._result[b]=c),0===this._remaining&&D(d,this._result)},T.prototype._willSettleAt=function(a,b){var c=this;F(a,void 0,function(a){c._settledAt(la,b,a)},function(a){c._settledAt(ma,b,a)})};var va=V,wa={Promise:ta,polyfill:va};c(6).amd?(d=function(){return wa}.call(b,c,b,f),!(void 0!==d&&(f.exports=d))):"undefined"!=typeof f&&f.exports?f.exports=wa:"undefined"!=typeof this&&(this.ES6Promise=wa),va()}).call(this)}).call(b,c(3),function(){return this}(),c(4)(a))},function(a,b){function c(){throw new Error("setTimeout has not been defined")}function d(){throw new Error("clearTimeout has not been defined")}function e(a){if(k===setTimeout)return setTimeout(a,0);if((k===c||!k)&&setTimeout)return k=setTimeout,setTimeout(a,0);try{return k(a,0)}catch(b){try{return k.call(null,a,0)}catch(b){return k.call(this,a,0)}}}function f(a){if(l===clearTimeout)return clearTimeout(a);if((l===d||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(a);try{return l(a)}catch(b){try{return l.call(null,a)}catch(b){return l.call(this,a)}}}function g(){p&&n&&(p=!1,n.length?o=n.concat(o):q=-1,o.length&&h())}function h(){if(!p){var a=e(g);p=!0;for(var b=o.length;b;){for(n=o,o=[];++q<b;)n&&n[q].run();q=-1,b=o.length}n=null,p=!1,f(a)}}function i(a,b){this.fun=a,this.array=b}function j(){}var k,l,m=a.exports={};!function(){try{k="function"==typeof setTimeout?setTimeout:c}catch(a){k=c}try{l="function"==typeof clearTimeout?clearTimeout:d}catch(a){l=d}}();var n,o=[],p=!1,q=-1;m.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];o.push(new i(a,b)),1!==o.length||p||e(h)},i.prototype.run=function(){this.fun.apply(null,this.array)},m.title="browser",m.browser=!0,m.env={},m.argv=[],m.version="",m.versions={},m.on=j,m.addListener=j,m.once=j,m.off=j,m.removeListener=j,m.removeAllListeners=j,m.emit=j,m.binding=function(a){throw new Error("process.binding is not supported")},m.cwd=function(){return"/"},m.chdir=function(a){throw new Error("process.chdir is not supported")},m.umask=function(){return 0}},function(a,b){a.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children=[],a.webpackPolyfill=1),a}},function(a,b){},function(a,b){a.exports=function(){throw new Error("define cannot be used indirect")}},function(a,b,c){function d(){var a=[];window!==window.parent&&a.push(window.parent);var b=document.getElementsByTagName("iframe");if(b.length){var c=!0,d=!1,e=void 0;try{for(var f,g=b[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value;a.push(h.contentWindow)}}catch(a){d=!0,e=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw e}}}return a}function e(a){if(a.data.protocol===q)switch(a.data.type){case"rpc:request":f(a);break;case"rpc:response":g(a)}}function f(a){var b=a.data,c={method:b.method,args:b.args},d=new m(c,a.source);r.add(d),o[b.method].apply(null,b.args)}function g(a){var b=a.data;({method:b.method,args:b.args});b.success&&i(b.method,b.args)}function h(a,b){try{return a.postMessage(b,a.location.origin),!0}catch(a){return!1}}function i(a,b){var c={method:a,args:b};(incomingRequest=r.find(c))&&(k(incomingRequest.contentWindow,a,b,!0),r.remove(incomingRequest)),(outgoingRequest=s.find(c))&&(outgoingRequest.resolve(),s.remove(outgoingRequest))}function j(a,b,c){var d={protocol:q,type:"rpc:request",method:b,args:c};h(a,d)}function k(a,b,c,d){var e={protocol:q,type:"rpc:response",method:b,args:c,success:d};h(a,e)}function l(a,b,c){var e={method:a,args:b};if(existingOutgoingRequest=s.find(e))return existingOutgoingRequest.promise;var f=r.find(e),g=d().filter(function(a){return!f||f.contentWindow!==a}),h=new n(e,c);return s.add(h),g.forEach(function(c){j(c,a,b)}),h.promise}var m=c(8),n=c(10),o=c(1),p=(c(2).Promise,c(11)),q="crossframe-pendo",r=new p,s=new p;window.addEventListener("message",e),a.exports={resolveRequest:i,tryAdjacentFrames:l}},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var g=c(9),h=function(a){function b(a,c){d(this,b);var f=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return f.contentWindow=c,f}return f(b,a),b}(g);a.exports=h},function(a,b){function c(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var d=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),e=function(){function a(b){c(this,a),this.method=b.method,this.args=b.args}return d(a,[{key:"argsMatch",value:function(a){if(this.args.length!==a.length)return!1;for(var b=0;b<this.args.length;b++)if(this.args[b]!==a[b])return!1;return!0}}]),a}();a.exports=e},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}var g=c(2).Promise,h=c(9),i=function(a){function b(a,c){d(this,b);var f=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return f.promise=new g(function(a,b){f.resolve=a,window.setTimeout(b,c)}),f}return f(b,a),b}(h);a.exports=i},function(a,b,c){function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=c(9),g=function(){function a(){d(this,a),this.requests=[]}return e(a,[{key:"add",value:function(a){if(a instanceof f)return this.requests.push(a);throw new Error("Argument must be of type 'Request'")}},{key:"find",value:function(a){var b=!0,c=!1,d=void 0;try{for(var e,f=this.requests[Symbol.iterator]();!(b=(e=f.next()).done);b=!0){var g=e.value,h=g.method===a.method,i=g.argsMatch(a.args);if(h&&i)return g}}catch(a){c=!0,d=a}finally{try{!b&&f.return&&f.return()}finally{if(c)throw d}}}},{key:"remove",value:function(a){this.requests=this.requests.filter(function(b){return b!==a})}}]),a}();a.exports=g}])});
//# sourceMappingURL=crossframe-pendo.map